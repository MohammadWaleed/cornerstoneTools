
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Plugins Â· cornerstone-tools</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-cornerstone/cornerstone.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="./" />
    
    
    <link rel="prev" href="../custom-tools/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                



<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://github.com/cornerstonejs/cornerstoneTools/releases">
            
                    
                    Release Notes
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Essentials</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../installation.html">
            
                <a href="../installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../">
            
                <a href="../#what-is-cornerstone-tools-js">
            
                    
                    What is CornerstoneTools.js?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../">
            
                <a href="../#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../">
            
                <a href="../#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../">
            
                <a href="../#adding-and-using-tools">
            
                    
                    Adding and Using Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../">
            
                <a href="../#next-steps">
            
                    
                    Next Steps
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../contributing.html">
            
                <a href="../contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tools In-Depth</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/">
            
                    
                    Anatomy of a Tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#modes">
            
                    
                    Modes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#configuration">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#interaction-types">
            
                    
                    Interaction Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#strategies">
            
                    
                    Strategies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#mixins">
            
                    
                    Mixins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../anatomy-of-a-tool/">
            
                <a href="../anatomy-of-a-tool/#measurement-data">
            
                    
                    Measurement Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../tool-types/">
            
                <a href="../tool-types/">
            
                    
                    Tool Types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../tool-types/">
            
                <a href="../tool-types/#base-tool">
            
                    
                    Base Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../tool-types/">
            
                <a href="../tool-types/#base-annotation-tool">
            
                    
                    Base Annotation Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../tool-types/">
            
                <a href="../tool-types/#base-brush-tool">
            
                    
                    Base Brush Tool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../tool-mixins/">
            
                <a href="../tool-mixins/">
            
                    
                    Tool Mixins
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../tool-mixins/">
            
                <a href="../tool-mixins/#binary-tools">
            
                    
                    Binary Tools
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../custom-tools/">
            
                <a href="../custom-tools/">
            
                    
                    Custom Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../custom-tools/">
            
                <a href="../custom-tools/#the-tool-interface">
            
                    
                    The Tool Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../custom-tools/">
            
                <a href="../custom-tools/#extending-existing-tools">
            
                    
                    Extending Existing Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="../custom-tools/">
            
                <a href="../custom-tools/#mixin-behaviors">
            
                    
                    Mixin Behaviors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4" data-path="../custom-tools/">
            
                <a href="../custom-tools/#mode-change-callbacks">
            
                    
                    Mode Change Callbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.5" data-path="../custom-tools/">
            
                <a href="../custom-tools/#event-dispatcher-callbacks">
            
                    
                    Event Dispatcher Callbacks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="3.5" data-path="./">
            
                <a href="./">
            
                    
                    Plugins
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="./">
            
                <a href="./#modules">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Migrating</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../migration/">
            
                <a href="../migration/#2x">
            
                    
                    Migration from 2.x
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../migration/">
            
                <a href="../migration/#1x">
            
                    
                    Migration from 1.x
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Misc</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../api.html">
            
                <a href="../api.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" >
            
                <span>
            
                    
                    3rd Party Tool Directory
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" >
            
                <span>
            
                    
                    Custom Tool Example Repositories
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>



                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
  
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Plugins</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="plugins">Plugins</h1>
<p><code>cornerstoneTools</code> v3.0 comes with a new plugin architecture, so that one can easily drop new tools and modules into cornerstoneTools. This comes with the advantage of not having to maintain a fork of the entire codebase should you wish to include one other tool. However, if you think a tool you have developed would be valued by the wider cornerstone community, please consider submitting a pull request and contributing it back.</p>
<p class="tip">This documentation is for an unreleased (still in testing) version of Cornerstone Tools. Until it is released, its API may experience frequent breaking changes. The <a href="../history/v2">current stable release can be found here</a>.</p>


<h2 id="modules">Store Modules </h2>
<p>A store module is a namespaced storage object in the <code>store</code> that contains the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Requirement</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>state</td>
<td>Mandatory</td>
<td>An object that stores the module&apos;s current state. There is no vigorous structure your state must follow, and you may structure it however you wish. We recommend as many top level primitives as possible, however getters can be used for more complicated queries.</td>
</tr>
<tr>
<td>getters</td>
<td>Optional</td>
<td>An object comprised of functions that query state. Getters can be used for more complex queries of the state (e.g. to yield a value that references a specific <code>cornerstone</code> enabled element). Top level primitives that require no calculation should instead by accessed by <code>const property = state.property</code>, as this reduces boilerplate in implementation code.</td>
</tr>
<tr>
<td>setters</td>
<td>Optional</td>
<td>An object comprised of functions that modify state. Setters can be used for more complex input (e.g. <code>push</code> object <code>x</code> to array <code>y</code>). Top level primitives should be set by <code>state.property = value</code>, as this reduces boilerplate in implementation code.</td>
</tr>
<tr>
<td>onRegisterCallback (name)</td>
<td>Optional</td>
<td>This function is called when the module is registered to the <code>cornerstoneTools</code> <code>store</code>. It is used to perform any global initialization the modules requires. The <code>name</code> the module was given upon registration is passed to the callback.</td>
</tr>
<tr>
<td>enabledElementCallback (enabledElement)</td>
<td>Optional</td>
<td>This function is called once for each <code>enabledElement</code> upon registering the module, and again any time a new <code>enabledElement</code> is added to the <code>cornerstoneTools</code> instance. The <code>enabledElement</code> is passed to the callback.</td>
</tr>
</tbody>
</table>
<p>Most modules will have getters and setters, unless they only contain primitives (e.g. the modules state is only comprised of <code>boolean</code> toggles).</p>
<h3 id="creating-a-3rd-party-module">Creating a 3rd party module</h3>
<p>Here is a simple toy example of a module with state, setters and getters:</p>
<pre><code class="lang-js"><span class="hljs-comment">// helloWorldModule.js</span>

<span class="hljs-keyword">const</span> state = {
  isPolite: <span class="hljs-literal">true</span>
  responses: {
    polite: <span class="hljs-string">&apos;Hello World!&apos;</span>,
    rude: <span class="hljs-string">&apos;Go away, World.&apos;</span>
  }
};

<span class="hljs-keyword">const</span> setters = {
  politeResponse: (response) =&gt; {
    state.responses.polite = response;
  },
  rudeResponse: (response) =&gt; {
    state.responses.rude = response;
  }
};

<span class="hljs-keyword">const</span> getters = {
  response: () =&gt; {
    <span class="hljs-keyword">if</span> (state.isPolite) {
      <span class="hljs-keyword">return</span> state.responses.polite;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> state.response.rude;
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onRegisterCallback</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Hello onRegisterCallback.&apos;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enabledElementCallback</span> (<span class="hljs-params">enabledElement</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`hello element <span class="hljs-subst">${enabledElement.uuid}</span>.`</span>)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  state,
  getters,
  setters,
  onRegisterCallback,
  enabledElementCallback
};
</code></pre>
<p>A more complete and realistic example of a module including both optional callbacks can be found in <code>src/store/modules/brushModule.js</code>.</p>
<h3 id="registering-a-3rd-party-module">Registering a 3rd party module</h3>
<p>Once you have built your module you need to register it. For 3rd party modules you can do this after you initialize <code>cornerstoneTools</code>, as follows.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> helloWorldModule <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./helloWorldModule.js&apos;</span>;

<span class="hljs-keyword">const</span> cTools = cornerstoneTools.init();

cTools.store.registerModule(helloWorldModule, <span class="hljs-string">&apos;helloWorld&apos;</span>);
</code></pre>
<p>The <code>registerModule</code> function takes two arguments, the module itself, and the name for it to be referenced by. Once registered, <code>onRegisterCallback</code> is called once, followed by <code>enabledElementCallback</code> for each enabled element.</p>
<p>The module can then be accessed by <code>cTools.store.helloWorld</code>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                

            </div>

            
                
                <a href="../custom-tools/#event-dispatcher-callbacks" class="navigation navigation-prev " aria-label="Previous page: Event Dispatcher Callbacks">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="./#modules" class="navigation navigation-next " aria-label="Next page: Modules">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Plugins","level":"3.5","depth":1,"next":{"title":"Modules","level":"3.5.1","depth":2,"anchor":"#modules","path":"plugins/index.md","ref":"plugins/index.md#modules","articles":[]},"previous":{"title":"Event Dispatcher Callbacks","level":"3.4.5","depth":2,"anchor":"#event-dispatcher-callbacks","path":"custom-tools/index.md","ref":"custom-tools/index.md#event-dispatcher-callbacks","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","theme-cornerstone","-fontsettings","github","ga","sitemap","versions"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/cornerstonejs/cornerstoneTools"},"search":{},"theme-cornerstone":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"highlight":{},"sitemap":{"hostname":"https://tools.cornerstonejs.org"},"ga":{"configuration":"auto","token":"UA-110573590-1"},"versions":{"type":"branches","gitbookConfigURL":"https://raw.githubusercontent.com/cornerstonejs/cornerstoneTools/master/docs/book.json","options":[{"value":"https://tools.cornerstonejs.org/history/v2/","text":"Version 2.x"},{"value":"https://tools.cornerstonejs.org/","text":"Version 3.x","selected":true}]},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/cornerstonejs/cornerstoneTools/edit/master/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"cornerstone-tools","links":{"sharing":{"facebook":false,"twitter":false}},"gitbook":">3.0.0"},"file":{"path":"plugins/index.md","mtime":"2018-10-01T19:24:23.191Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-10-02T18:11:59.666Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-versions/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

